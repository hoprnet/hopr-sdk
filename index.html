<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@hoprnet/hopr-sdk</title><meta name="description" content="Documentation for @hoprnet/hopr-sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@hoprnet/hopr-sdk</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@hoprnet/hopr-sdk</h2></div><div class="tsd-panel tsd-typography"><a id="md:hoprnethopr-sdk" class="tsd-anchor"></a><h1><a href="#md:hoprnethopr-sdk">@hoprnet/hopr-sdk</a></h1><a id="md:description" class="tsd-anchor"></a><h2><a href="#md:description">Description</a></h2><p>The <code>@hoprnet/hopr-sdk</code> package is a software development kit for interacting with <a href="https://docs.hoprnet.org/developers/rest-api">HOPRd&#39;s Rest API functions</a>.
It provides a set of functions that allow developers to interact with the HOPR protocol and perform various actions such as node and account management, messaging, address retrieval, balance retrieval, and withdrawal and other operations.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><p>To install the <code>@hoprnet/hopr-sdk</code> package, follow these steps:</p>
<ol>
<li>Make sure you have <a href="https://nodejs.org">node.js</a> &gt;=18 installed on your machine.</li>
<li>Open your terminal or command prompt.</li>
<li>Navigate to your project directory.</li>
<li>Run the following command to install the package using:</li>
</ol>
<pre><code class="language-shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@hoprnet/hopr-sdk</span>
</code><button>Copy</button></pre>
<p>or</p>
<pre><code class="language-shell"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@hoprnet/hopr-sdk</span>
</code><button>Copy</button></pre>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><p>You can use the <code>@hoprnet/hopr-sdk</code> in two different ways:</p>
<a id="md:hoprsdk-class" class="tsd-anchor"></a><h3><a href="#md:hoprsdk-class">HoprSDK class</a></h3><p>By creating a new instance of the HoprSDK class.</p>
<ol>
<li>Import the HoprSDK class from the package:</li>
</ol>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HoprSDK</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@hoprnet/hopr-sdk&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Create an instance of the HoprSDK class by providing the required parameters:</li>
</ol>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sdk</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HoprSDK</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">apiEndpoint:</span><span class="hl-1"> </span><span class="hl-2">&#39;http://localhost:3001&#39;</span><span class="hl-1">, </span><span class="hl-7">// Replace with your HOPR API endopoint.</span><br/><span class="hl-1">  </span><span class="hl-4">apiToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;your-api-token&#39;</span><span class="hl-1">, </span><span class="hl-7">// Replace with your API token</span><br/><span class="hl-1">  </span><span class="hl-4">timeout:</span><span class="hl-1"> </span><span class="hl-8">5000</span><span class="hl-1"> </span><span class="hl-7">// Optional timeout in milliseconds (defaults to 30000)</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<ol start="3">
<li>You can now use the <code>sdk</code> instance to access the available functions. For example, to get the HOPR and native addresses associated with the node:</li>
</ol>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">addresses</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">sdk</span><span class="hl-1">.</span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-4">account</span><span class="hl-1">.</span><span class="hl-0">getAddresses</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">addresses</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:hopr-api-functions" class="tsd-anchor"></a><h4><a href="#md:hopr-api-functions">HOPR API functions</a></h4><p>By calling directly the rest API functions.</p>
<ol>
<li>Import the API object from the package:</li>
</ol>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">api</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@hoprnet/hopr-sdk&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ul>
<li>If your ts config includes <code>&quot;moduleResolution&quot;: &quot;nodenext&quot; or &quot;node16&quot;</code>, you can import the functions like this:</li>
</ul>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">getAddresses</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@hoprnet/hopr-sdk/api&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Access the desired function, keep in mind that you&#39;ll need to provide a <strong>payload object</strong> with the <code>apiEndpoint</code> and <code>apiToken</code> for each individual function:</li>
</ol>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">addresses</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-0">getAddresses</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">apiEndpoint:</span><span class="hl-1"> </span><span class="hl-2">&#39;http://localhost:3001&#39;</span><span class="hl-1">, </span><span class="hl-7">// Replace with your HOPR API endopoint</span><br/><span class="hl-1">  </span><span class="hl-4">apiToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;your-api-token&#39;</span><span class="hl-1"> </span><span class="hl-7">// Replace with your API token</span><br/><span class="hl-1">  </span><span class="hl-4">timeout</span><span class="hl-1">: </span><span class="hl-8">5000</span><span class="hl-1"> </span><span class="hl-7">// Optional timeout in milliseconds (defaults to 30000)</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">addresses</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:hopr-flows-functions" class="tsd-anchor"></a><h4><a href="#md:hopr-flows-functions">HOPR Flows functions</a></h4><p>By calling directly the flows functions.</p>
<ol>
<li>Import the flows object from the package:</li>
</ol>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">flows</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@hoprnet/hopr-sdk&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ul>
<li>If your ts config includes <code>&quot;moduleResolution&quot;: &quot;nodenext&quot; or &quot;node16&quot;</code>, you can import the functions like this:</li>
</ul>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">openMultipleChannels</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@hoprnet/hopr-sdk/flows&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Access the desired function, keep in mind that you&#39;ll need to provide a <strong>payload object</strong> with the <code>apiEndpoint</code> and <code>apiToken</code> for each individual function:</li>
</ol>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">res</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">flows</span><span class="hl-1">.</span><span class="hl-0">openMultipleChannels</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">apiEndpoint:</span><span class="hl-1"> </span><span class="hl-2">&#39;http://localhost:3001&#39;</span><span class="hl-1">, </span><span class="hl-7">// Replace with your HOPR API endopoint</span><br/><span class="hl-1">  </span><span class="hl-4">apiToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;your-api-token&#39;</span><span class="hl-1"> </span><span class="hl-7">// Replace with your API token</span><br/><span class="hl-1">  </span><span class="hl-4">timeout</span><span class="hl-1">: </span><span class="hl-8">60e3</span><span class="hl-1"> * </span><span class="hl-8">7</span><span class="hl-1"> </span><span class="hl-7">// Optional timeout in milliseconds (defaults to 30000) | This function takes really long</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:documentation" class="tsd-anchor"></a><h2><a href="#md:documentation">Documentation</a></h2><ul>
<li><a href="https://hoprnet.github.io/hopr-sdk/classes/HoprSDK.html">HoprSDK Class</a></li>
<li><a href="https://hoprnet.github.io/hopr-sdk/modules/api.html">API functions</a></li>
<li><a href="https://hoprnet.github.io/hopr-sdk/modules/flows.html">Flows functions</a></li>
<li><a href="https://hoprnet.github.io/hopr-sdk/modules/utils.html">Utils</a></li>
<li><a href="https://hoprnet.github.io/hopr-sdk/modules.html">Type Aliases and Variables</a></li>
</ul>
<a id="md:project-setup" class="tsd-anchor"></a><h2><a href="#md:project-setup">Project setup</a></h2><p>Source code resides under <code>src/</code> folder.</p>
<ul>
<li>api: the api routes seperated by resource</li>
<li>ethereum: ethereum ABIs and Addresses that are relevant to Hopr</li>
<li>flows: common uses of multiple functions in a row</li>
<li>types: api response and request types using zod</li>
<li>utils: extras that are used throughout the repo, such as <code>fetchWithTimeout</code></li>
</ul>
<a id="md:api" class="tsd-anchor"></a><h2><a href="#md:api">API</a></h2><a id="md:directory-setup" class="tsd-anchor"></a><h3><a href="#md:directory-setup">Directory Setup</a></h3><p>The api folder is used to find routes with ease.</p>
<p>For example if you are looking for <code>GET /api/v4/node/info</code> you would go straight
to the node folder and find the file <code>getInfo.ts</code> alongside <code>getInfo.spec.ts</code> to
understand how this function will react to different responses from the node.</p>
<p>In a more general sense it looks like this:</p>
<pre><code><span class="hl-1">├── </span><span class="hl-4">api</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">resource</span><span class="hl-1"> (</span><span class="hl-4">example</span><span class="hl-1">: </span><span class="hl-4">node</span><span class="hl-1">)</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-4">adapter</span><span class="hl-1">.</span><span class="hl-4">ts</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-4">getResource</span><span class="hl-1">.</span><span class="hl-4">ts</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-4">getResource</span><span class="hl-1">.</span><span class="hl-4">spec</span><span class="hl-1">.</span><span class="hl-4">ts</span>
</code><button>Copy</button></pre>
<p>The adapter creates a resource class used by the <a href="./sdk.ts">sdk class</a></p>
<a id="md:adding-a-new-route" class="tsd-anchor"></a><h4><a href="#md:adding-a-new-route">Adding a new route</a></h4><p>The resource of the route can be seen after the <code>v4</code> keyword, for example in this example <code>/api/v4/node/info</code> the resource is <code>node</code>.</p>
<a id="md:new-resource" class="tsd-anchor"></a><h5><a href="#md:new-resource">New Resource</a></h5><ul>
<li>Create a the resource folder that must contain: adapter.ts and functions with tests.</li>
</ul>
<a id="md:exisiting-resource" class="tsd-anchor"></a><h5><a href="#md:exisiting-resource">Exisiting Resource</a></h5><ul>
<li>Add the function to the resource folder with tests showing how the route would react to
different status codes</li>
</ul>
<a id="md:basic-function-structure" class="tsd-anchor"></a><h4><a href="#md:basic-function-structure">Basic function structure</a></h4><pre><code class="language-Typescript"><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">getResource</span><span class="hl-1">(</span><span class="hl-4">payload</span><span class="hl-1">: </span><span class="hl-9">ResourcePayloadType</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">rawResponse</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">fetchResource</span><span class="hl-1">()</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// received unexpected error from server</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">isServerError</span><span class="hl-1">(</span><span class="hl-4">rawResponse</span><span class="hl-1">)) {</span><br/><span class="hl-1">     </span><span class="hl-3">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// received expected response</span><br/><span class="hl-1">    </span><span class="hl-7">// this can either be done with a Zod object or a status code</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">receivedExpectedResponse</span><span class="hl-1">(</span><span class="hl-4">rawResponse</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">parseResponse</span><span class="hl-1">(</span><span class="hl-4">rawResponse</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// check if response has the structure of an expected sdk api error</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">isApiErrorResponse</span><span class="hl-1">(</span><span class="hl-4">rawResponse</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-3">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">sdkApiError</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// if we get to this point then we could not parse the response</span><br/><span class="hl-1">    </span><span class="hl-7">// and it is not unexpected error</span><br/><span class="hl-1">    </span><span class="hl-7">// we probably need to update the zod type</span><br/><span class="hl-1">    </span><span class="hl-3">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ZodError</span><span class="hl-1">(</span><span class="hl-4">parsedRes</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">issues</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:deployment-process" class="tsd-anchor"></a><h2><a href="#md:deployment-process">Deployment process</a></h2><p>To contribute to this repository you will need to create a pull request. More information about the existing automated workflows can be found in <a href="./.github/workflows/README.md">GitHub Actions</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:hoprnethopr-sdk"><span>@hoprnet/hopr-<wbr/>sdk</span></a><ul><li><a href="#md:description"><span>Description</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:hoprsdk-class"><span>HoprSDK class</span></a></li><li><ul><li><a href="#md:hopr-api-functions"><span>HOPR API functions</span></a></li><li><a href="#md:hopr-flows-functions"><span>HOPR <wbr/>Flows functions</span></a></li></ul></li></ul></li><li><a href="#md:documentation"><span>Documentation</span></a></li><li><a href="#md:project-setup"><span>Project setup</span></a></li><li><a href="#md:api"><span>API</span></a></li><li><ul><li><a href="#md:directory-setup"><span>Directory <wbr/>Setup</span></a></li><li><ul><li><a href="#md:adding-a-new-route"><span>Adding a new route</span></a></li><li><ul><li><a href="#md:new-resource"><span>New <wbr/>Resource</span></a></li><li><a href="#md:exisiting-resource"><span>Exisiting <wbr/>Resource</span></a></li></ul></li><li><a href="#md:basic-function-structure"><span>Basic function structure</span></a></li></ul></li></ul></li><li><a href="#md:deployment-process"><span>Deployment process</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@hoprnet/hopr-sdk</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>